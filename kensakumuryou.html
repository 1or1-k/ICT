<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>検索ページ</title>
</head>
<body>
    <h1>サイト内検索</h1>
    <input type="text" id="searchBox" placeholder="検索キーワードを入力">
    <button onclick="performSearch()">検索</button>
    <div id="searchResults"></div>
    <button onclick="location.href='home.html'">戻る</button>

    <script>
        const pages = [
            { 
                url: 'mondaimuryou.html', 
                title: '問題集', 
                content: [
                    { text: '日本の所得税の最高税率は何％ですか？', category: '問題集' },
                    { text: '所得税の課税対象となる所得の種類はどれですか？', category: '問題集' },
                    { text: '固定資産税はどのような資産に対して課されますか？', category: '問題集' },
                    { text: '住民税はどのように計算されますか？', category: '問題集' },
                    { text: '相続税の基礎控除額はどのように計算されますか？', category: '問題集' }
                ]
            },
            //以下に記入をお願いします。
            { 
                url: 'https://1or1-k.github.io/ICT/textbook_vip_home.html', 
                title: '参考書', 
                content: [
                    { text: '税法入門', category: '参考書' },
                    { text: '国税通則法', category: '参考書' },
                    { text: '所得税法', category: '参考書' },
                    { text: '法人税法', category: '参考書' },
                    { text: '相続税法', category: '参考書' },
                    { text: '消費税法', category: '参考書' },
                    { text: '国税徴収法', category: '参考書' },
                    { text: '間接税法', category: '参考書' },

                ]
            },
            
            //以下に記入をお願いします。
            { 
                url: 'video1_anime.html', 
                title: 'video1', 
                content: [
                    { text: '租税教育教材・アニメ', category: 'video1' },
                    { text: 'ダナの森ものがたり', category: 'video1' },
                    { text: 'ふしぎなはこ', category: 'video1' },
                    { text: 'みんなのためだから', category: 'video1' },
                    { text: 'ちぇいとうんこちゃん', category: 'video1' },
                    { text: 'マリンとヤマト　不思議な日曜日', category: 'video1' },
                ]
            },
            
            //以下に記入をお願いします。
            { 
                url: 'video2_kakutei.html', 
                title: 'video2', 
                content: [
                    { text: '確定申告特集', category: 'video2' },
                    { text: 'スマホ申告　青色申告決算書等の入力方法', category: 'video2' },
                    { text: 'スマホのカメラで「給与所得の源泉徴収票」を読み取って自動入力', category: 'video2' },
                    { text: '株式等の申告は国税庁ホームページで！', category: 'video2' },
                    { text: 'スマホ申告（特定口座の入力のしかた）', category: 'video2' },
                    { text: '土地や建物をお売りになった場合の申告は「確定申告書等作成コーナー」で！', category: 'video2' },
                    { text: '', category: 'video2' },
                ]
            },
            
            //以下に記入をお願いします。
            { 
                url: '', 
                title: '', 
                content: [
                    { text: '', category: '' },
                    { text: '', category: '' },
                    { text: '', category: '' },
                    { text: '', category: '' },
                    { text: '', category: '' },
                ]
            },
            
            //以下に記入をお願いします。
            { 
                url: '', 
                title: '', 
                content: [
                    { text: '', category: '' },
                    { text: '', category: '' },
                    { text: '', category: '' },
                    { text: '', category: '' },
                    { text: '', category: '' },
                ]
            },
            // 他のページ情報を追加
        ];

        function performSearch() {
            const query = document.getElementById('searchBox').value.toLowerCase();
            const results = [];

            pages.forEach(page => {
                const matchedContent = page.content.filter(item => 
                    item.text.toLowerCase().includes(query) || 
                    item.category.toLowerCase().includes(query)
                );
                if (matchedContent.length > 0) {
                    results.push({ url: page.url, title: page.title, content: matchedContent });
                }
            });

            const resultsDiv = document.getElementById('searchResults');
            resultsDiv.innerHTML = '';
            if (results.length > 0) {
                results.forEach(result => {
                    const resultItem = document.createElement('div');
                    resultItem.innerHTML = `<a href="${result.url}">${result.title}</a>`;
                    result.content.forEach(contentItem => {
                        const highlightedContent = highlightQuery(contentItem.text, query);
                        resultItem.innerHTML += `<p>${highlightedContent}</p>`;
                    });
                    resultsDiv.appendChild(resultItem);
                });
            } else {
                resultsDiv.innerHTML = '<p>見つかりませんでした</p>';
            }
        }

        function highlightQuery(content, query) {
            const regex = new RegExp(`(${query})`, 'gi');
            return content.replace(regex, '<mark>$1</mark>');
        }
    </script>
</body>
</html>

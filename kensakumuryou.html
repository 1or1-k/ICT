<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>検索ページ</title>
</head>
<body>
    <h1>サイト内検索</h1>
    <input type="text" id="searchBox" placeholder="検索キーワードを入力">
    <button onclick="performSearch()">検索</button>
    <div id="searchResults"></div>
    <button onclick="location.href='home.html'">戻る</button>

    <script>
        const pages = [
            { 
                url: 'mondaimuryou.html', 
                title: '問題集', 
                content: [
                    { text: '日本の所得税の最高税率は何％ですか？', category: '問題集' },
                    { text: '所得税の課税対象となる所得の種類はどれですか？', category: '問題集' },
                    { text: '固定資産税はどのような資産に対して課されますか？', category: '問題集' },
                    { text: '住民税はどのように計算されますか？', category: '問題集' },
                    { text: '相続税の基礎控除額はどのように計算されますか？', category: '問題集' }
                ]
            },
            //以下に記入をお願いします。
            { 
                url: 'https://1or1-k.github.io/ICT/textbook_vip_home.html', 
                title: '参考書', 
                content: [
                    { text: '税法入門', category: '参考書' },
                    { text: '国税通則法', category: '参考書' },
                    { text: '所得税法', category: '参考書' },
                    { text: '法人税法', category: '参考書' },
                    { text: '相続税法', category: '参考書' },
                    { text: '消費税法', category: '参考書' },
                    { text: '国税徴収法', category: '参考書' },
                    { text: '間接税法', category: '参考書' },

                ]
            },
            
            //以下に記入をお願いします。
            { 
                url: 'video1_anime.html', 
                title: 'video1', 
                content: [
                    { text: '租税教育教材・アニメ', category: 'video1' },
                    { text: 'ダナの森ものがたり', category: 'video1' },
                    { text: 'ふしぎなはこ', category: 'video1' },
                    { text: 'みんなのためだから', category: 'video1' },
                    { text: 'ちぇいとうんこちゃん', category: 'video1' },
                    { text: 'マリンとヤマト　不思議な日曜日', category: 'video1' },
                ]
            },
            
            //以下に記入をお願いします。
            { 
                url: 'video2_kakutei.html', 
                title: 'video2', 
                content: [
                    { text: '確定申告特集', category: 'video2' },
                    { text: 'スマホ申告　青色申告決算書等の入力方法', category: 'video2' },
                    { text: 'スマホのカメラで「給与所得の源泉徴収票」を読み取って自動入力', category: 'video2' },
                    { text: '株式等の申告は国税庁ホームページで！', category: 'video2' },
                    { text: 'スマホ申告（特定口座の入力のしかた）', category: 'video2' },
                    { text: '土地や建物をお売りになった場合の申告は「確定申告書等作成コーナー」で！', category: 'video2' },
                ]
            },
            
            //以下に記入をお願いします。
            { 
                url: 'video3_syouhi.html', 
                title: 'video3', 
                content: [
                    { text: '消費税　軽減税率制度特集', category: 'video3' },
                    { text: '1　申告書作成', category: 'video3' },
                    { text: '2　申告書作成（課税仕入れ等の税額の計算から差引税額・地方消費税額の計算まで）', category: 'video3' },
                    { text: '3 申告書作成（課税標準額・消費税額の計算から課税売上割合の計算まで）', category: 'video3' },
                    { text: '4 軽減税率制度の概要・区分経理、決算処理', category: 'video3' },
                    { text: '5 適格請求書等保存方式', category: 'video3' },
                ]
            },
            
            //以下に記入をお願いします。
            { 
                url: 'video4_nouzei.html', 
                title: '', 
                content: [
                    { text: '1　新たに猶予を申請する方 Excelでできる！国税の猶予に必要な書類の作成方法', category: 'video4　納税の猶予制度特集' },
                    { text: '2　特例猶予を受けている方 Excelでできる！国税の猶予に必要な書類の作成方法', category: 'video4　納税の猶予制度特集' },
                    { text: '3 自宅のExcelでできる特例猶予の申請書の作成方法', category: 'video4　納税の猶予制度特集' },
                ]
            },

            { 
                url: 'video5_kicyou.html', 
                title: 'video5　記帳・決算のしかた', 
                content: [
                    { text: '記帳・決算のしかた', category: 'video5　記帳・決算のしかた' },
                    { text: '1　記帳のしかた（青色申告編）', category: 'video5　記帳・決算のしかた' },
                    { text: '2　記帳のしかた（白色申告編）', category: 'video5　記帳・決算のしかた' },
                    { text: '3 決算のしかた（青色申告編）', category: 'video5　記帳・決算のしかた' },
                    { text: '4 決算のしかた（白色申告編）', category: 'video5　記帳・決算のしかた' },
                    { text: '5 決算のしかた（農業所得編）', category: 'video5　記帳・決算のしかた' },
                    { text: '6 教えて!!令和３年度改正　電子帳簿保存法', category: 'video5　記帳・決算のしかた' },
                    { text: '7 別途最新版あり 教えて！！令和３年度改正　電子帳簿保存法', category: 'video5　記帳・決算のしかた' },

                ]
            },

            { 
                url: 'video6_etax.html', 
                title: 'video6   e-Taxのご利用方法', 
                content: [
                    { text: ' e-Taxのご利用方法', category: 'video6   e-Taxのご利用方法' },
                    { text: '1　e-Taxソフト（WEB版）をご利用の方へ【90秒ver】', category: 'video6   e-Taxのご利用方法' },
                    { text: '2　e-Taxソフト（WEB版）をご利用の方へ', category: 'video6   e-Taxのご利用方法' },
                    { text: '3　e-Taxのご利用方法③納税証明書の交付請求', category: 'video6   e-Taxのご利用方法' },
                    { text: '4　e-Taxのご利用方法④電子納税の概要', category: 'video6   e-Taxのご利用方法' },
                    { text: '5　e-Taxのご利用方法⑤ダイレクト納付（e-Taxによる口座振替）について', category: 'video6   e-Taxのご利用方法' },
                    { text: '6　e-Taxのご利用方法⑥インターネットバンキングによる納付について', category: 'video6   e-Taxのご利用方法' },
                    { text: '7　e-Taxのご利用方法⑧e-Taxを利用した法定調書の作成・提出', category: 'video6   e-Taxのご利用方法' },
                    { text: '8 e-Taxのご利用方法⑨税理士による代理送信の基本的な操作及びメッセージボックスの共有', category: 'video6   e-Taxのご利用方法' },

                ]
            },

            { 
                url: '', 
                title: '', 
                content: [
                    { text: '', category: '' },

                ]
            },
            // 他のページ情報を追加
        ];

        function performSearch() {
            const query = document.getElementById('searchBox').value.toLowerCase();
            const results = [];

            pages.forEach(page => {
                const matchedContent = page.content.filter(item => 
                    item.text.toLowerCase().includes(query) || 
                    item.category.toLowerCase().includes(query)
                );
                if (matchedContent.length > 0) {
                    results.push({ url: page.url, title: page.title, content: matchedContent });
                }
            });

            const resultsDiv = document.getElementById('searchResults');
            resultsDiv.innerHTML = '';
            if (results.length > 0) {
                results.forEach(result => {
                    const resultItem = document.createElement('div');
                    resultItem.innerHTML = `<a href="${result.url}">${result.title}</a>`;
                    result.content.forEach(contentItem => {
                        const highlightedContent = highlightQuery(contentItem.text, query);
                        resultItem.innerHTML += `<p>${highlightedContent}</p>`;
                    });
                    resultsDiv.appendChild(resultItem);
                });
            } else {
                resultsDiv.innerHTML = '<p>見つかりませんでした</p>';
            }
        }

        function highlightQuery(content, query) {
            const regex = new RegExp(`(${query})`, 'gi');
            return content.replace(regex, '<mark>$1</mark>');
        }
    </script>
</body>
</html>

<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>検索ページ</title>
</head>
<body>
    <h1>サイト内検索</h1>
    <input type="text" id="searchBox" placeholder="検索キーワードを入力">
    <button onclick="performSearch()">検索</button>
    <div id="searchResults"></div>
    <button onclick="location.href='home2.html'">戻る</button>

    <script>
        const pages = [
            { 
                url: 'mondai.html', 
                title: '問題集', 
                content: [
                    { text: '日本の所得税の最高税率は何％ですか？', category: '問題集' },
                    { text: '所得税の課税対象となる所得の種類はどれですか？', category: '問題集' },
                    { text: '固定資産税はどのような資産に対して課されますか？', category: '問題集' },
                    { text: '住民税はどのように計算されますか？', category: '問題集' },
                    { text: '相続税の基礎控除額はどのように計算されますか？', category: '問題集' }
                ]
            },
            //以下に記入をお願いします。
            { 
                url: '', 
                title: '', 
                content: [
                    { text: '', category: '' },
                    { text: '', category: '' },
                    { text: '', category: '' },
                    { text: '', category: '' },
                    { text: '', category: '' },
                ]
            },
            
            //以下に記入をお願いします。
            { 
                url: '', 
                title: '', 
                content: [
                    { text: '', category: '' },
                    { text: '', category: '' },
                    { text: '', category: '' },
                    { text: '', category: '' },
                    { text: '', category: '' },
                ]
            },
            
            //以下に記入をお願いします。
            { 
                url: '', 
                title: '', 
                content: [
                    { text: '', category: '' },
                    { text: '', category: '' },
                    { text: '', category: '' },
                    { text: '', category: '' },
                    { text: '', category: '' },
                ]
            },
            
            //以下に記入をお願いします。
            { 
                url: '', 
                title: '', 
                content: [
                    { text: '', category: '' },
                    { text: '', category: '' },
                    { text: '', category: '' },
                    { text: '', category: '' },
                    { text: '', category: '' },
                ]
            },
            
            //以下に記入をお願いします。
            { 
                url: '', 
                title: '', 
                content: [
                    { text: '', category: '' },
                    { text: '', category: '' },
                    { text: '', category: '' },
                    { text: '', category: '' },
                    { text: '', category: '' },
                ]
            },
            // 他のページ情報を追加
        ];

        function performSearch() {
            const query = document.getElementById('searchBox').value.toLowerCase();
            const results = [];

            pages.forEach(page => {
                const matchedContent = page.content.filter(item => 
                    item.text.toLowerCase().includes(query) || 
                    item.category.toLowerCase().includes(query)
                );
                if (matchedContent.length > 0) {
                    results.push({ url: page.url, title: page.title, content: matchedContent });
                }
            });

            const resultsDiv = document.getElementById('searchResults');
            resultsDiv.innerHTML = '';
            if (results.length > 0) {
                results.forEach(result => {
                    const resultItem = document.createElement('div');
                    resultItem.innerHTML = `<a href="${result.url}">${result.title}</a>`;
                    result.content.forEach(contentItem => {
                        const highlightedContent = highlightQuery(contentItem.text, query);
                        resultItem.innerHTML += `<p>${highlightedContent}</p>`;
                    });
                    resultsDiv.appendChild(resultItem);
                });
            } else {
                resultsDiv.innerHTML = '<p>見つかりませんでした</p>';
            }
        }

        function highlightQuery(content, query) {
            const regex = new RegExp(`(${query})`, 'gi');
            return content.replace(regex, '<mark>$1</mark>');
        }
    </script>
</body>
</html>
